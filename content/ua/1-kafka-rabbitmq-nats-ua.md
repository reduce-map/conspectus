# Apache Kafka, RabbitMQ і NATS

## Apache Kafka: Платформа для потокової обробки даних

### Основні компоненти

- **Події (Events):** Основна одиниця даних у Kafka, представлена у форматі ключ-значення. Кожна подія є незмінною і фіксує факт здійснення певної дії, наприклад, транзакції або дії користувача.
- **Теми (Topics):** Категорії, за якими групуються події. Теми поділяються на розділи (partitions) для паралельної обробки.
- **Розділи (Partitions):** Дозволяють масштабувати систему за рахунок розподілу даних між кількома вузлами.

### Реплікація і відмовостійкість

- **Реплікація:** Кожен розділ має кілька копій (реплік), що забезпечує високий рівень відмовостійкості. Записи здійснюються на лідері розділу і потім реплікуються на послідовників.
- **Консистентність:** Після запису на лідері дані реплікуються для забезпечення консистентності.

### Продюсери і Консьюмери

- **Продюсери:** Додатки, які генерують і надсилають події в теми Kafka.
- **Консьюмери:** Додатки, які підписуються на теми і читають події.

### Kafka Streams і Kafka Connect

- **Kafka Streams:** Інструмент для обробки та аналізу потокових даних з використанням декларативного API.
- **Kafka Connect:** Інтегрує Kafka з іншими системами, такими як бази даних, через налаштовувані коннектори.

### Використання

Kafka використовується для реалізації високопродуктивних, масштабованих рішень для потокової обробки даних у реальному часі, що робить її ідеальним вибором для великих компаній із високими вимогами до надійності та масштабованості.

## RabbitMQ: Надійний брокер повідомлень

### Основні компоненти

- **Черги (Queues):** Основна структура даних, до якої поміщаються повідомлення. Черги забезпечують надійну доставку повідомлень.
- **Обмінники (Exchanges):** Маршрутизують повідомлення до відповідних черг залежно від типу обмінника та правил маршрутизації.
- **Зв'язки (Bindings):** Визначають, як саме повідомлення направляються від обмінників до черг.

### Реплікація і відмовостійкість

- **Кластери:** RabbitMQ підтримує кластеризацію для підвищення відмовостійкості. Повідомлення можуть бути репліковані між вузлами кластера.
- **HA-проксі (HA Proxy):** Використовується для забезпечення високої доступності та відмовостійкості через розподіл навантаження та маршрутизацію.

### Продюсери і Консьюмери

- **Продюсери:** Додатки, які надсилають повідомлення до обмінників RabbitMQ.
- **Консьюмери:** Додатки, які читають повідомлення з черг RabbitMQ.

### Використання

RabbitMQ найефективніше використовується в сценаріях, де потрібна гарантована доставка повідомлень, складна маршрутизація і підтримка різних протоколів (наприклад, AMQP, MQTT).

## NATS: Легковажна система обміну повідомленнями

### Основні компоненти

- **Суб'єкти (Subjects):** Основна структура маршрутизації, яку використовує NATS. Суб'єкти дозволяють надсилати і отримувати повідомлення за іменами каналів.
- **З'єднання (Connections):** Клієнти підключаються до NATS через з'єднання, по яких передаються повідомлення.

### Реплікація і відмовостійкість

- **Кластери і Джетстрим (JetStream):** NATS підтримує кластеризацію для відмовостійкості та балансування навантаження. JetStream надає розширені можливості, такі як зберігання повідомлень і підтвердження їх доставки.

### Продюсери і Консьюмери

- **Продюсери:** Додатки, які надсилають повідомлення за суб'єктами NATS.
- **Консьюмери:** Додатки, які підписуються на суб'єкти і отримують повідомлення.

### Використання

NATS оптимальний для сценаріїв, де важлива мінімальна затримка і висока продуктивність. Він часто використовується в мікросервісній архітектурі і системах реального часу.

## Підсумкове порівняння

### Масштабованість

- **Kafka:** Висока масштабованість завдяки розділам і реплікації.
- **RabbitMQ:** Обмежена масштабованість, але добре справляється з кластеризацією і складною маршрутизацією.
- **NATS:** Підтримує горизонтальне масштабування, оптимізований для низької затримки.

### Відмовостійкість

- **Kafka:** Забезпечується за рахунок реплікації розділів і механізму лідера.
- **RabbitMQ:** Використовує кластеризацію і HA-проксі для підвищення відмовостійкості.
- **NATS:** Кластери і JetStream забезпечують базову відмовостійкість.

### Використання

- **Kafka:** Підходить для потокової обробки великих обсягів даних у реальному часі.
- **RabbitMQ:** Ефективний для складної маршрутизації повідомлень і гарантованої доставки.
- **NATS:** Ідеальний для легковажних мікросервісів із високими вимогами до продуктивності та мінімальної затримки.
